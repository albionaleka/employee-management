<nav class="w-full bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700">
  <div class="max-w-7xl mx-auto px-6 lg:px-8">
    <div class="flex h-16 items-center justify-between">
      <div class="flex items-center gap-6">
        <h1 class="text-2xl font-bold">
          <a href="{% url 'home' %}" class="text-blue-600 dark:text-blue-500 hover:text-blue-700 dark:hover:text-blue-300 transition-colors">menaxheri</a>
        </h1>
        <div class="hidden md:flex items-center gap-4">
          <a href="{% url 'employee_list' %}" class="px-3 py-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">View Employees</a>
          <a href="{% url 'add_employee' %}" class="px-3 py-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">Add Employee</a>
        </div>
      </div>

      <div class="flex items-center gap-4 relative">
        <button id="theme-toggle" class="relative p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
          <svg id="theme-toggle-light-icon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
          <svg id="theme-toggle-dark-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </button>

        <form method="POST" action="{% url 'logout' %}" class="hidden md:block">
          {% csrf_token %}
          <button type="submit" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors" title="Logout">
            <svg class="w-6 h-6 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path>
              <line x1="12" y1="2" x2="12" y2="12"></line>
            </svg>
          </button>
        </form>

        <button id="mobile-menu-btn" class="md:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
          <svg id="burger-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
          <svg id="close-icon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>

      </div>
    </div>

    <div id="mobile-menu" class="hidden md:hidden border-t border-gray-200 dark:border-gray-700 py-3">
      <div class="flex flex-col space-y-2">
        <a href="{% url 'employee_list' %}" class="px-3 py-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">View Employees</a>
        <a href="{% url 'add_employee' %}" class="px-3 py-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">Add Employee</a>
        <form method="POST" action="{% url 'logout' %}" class="px-3">
          {% csrf_token %}
          <button type="submit" class="w-full text-left py-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">Logout</button>
        </form>
      </div>
    </div>
  </div>
</nav>

<script>
  const getTheme = () => localStorage.getItem("theme") || (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");
  const updateIcons = () => {
    const isDark = document.documentElement.classList.contains('dark');
    document.getElementById('theme-toggle-dark-icon').classList.toggle('hidden', isDark);
    document.getElementById('theme-toggle-light-icon').classList.toggle('hidden', !isDark);
  };
  const setTheme = theme => {
    if(theme==='dark') document.documentElement.classList.add('dark'); 
    else document.documentElement.classList.remove('dark');
    localStorage.setItem('theme', theme);
    updateIcons();
  };
  setTheme(getTheme());
  updateIcons();
  document.getElementById('theme-toggle').addEventListener('click', ()=>{ 
    setTheme(document.documentElement.classList.contains('dark') ? 'light' : 'dark'); 
  });

  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const burgerIcon = document.getElementById('burger-icon');
  const closeIcon = document.getElementById('close-icon');

  mobileMenuBtn.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
    burgerIcon.classList.toggle('hidden');
    closeIcon.classList.toggle('hidden');
  });
</script>
