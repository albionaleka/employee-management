{% extends 'base.html' %}
{% block content %}
<div class="fixed top-4 right-4 z-50">
    <button id="theme-toggle" class="p-2 rounded-full bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-all border border-gray-200 dark:border-gray-700">
        <svg id="theme-toggle-light-icon" class="w-6 h-6 hidden text-gray-900 dark:text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <svg id="theme-toggle-dark-icon" class="w-6 h-6 text-gray-900 dark:text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
    </button>
</div>

<div class="min-h-screen flex items-center justify-center px-4 py-12">
    <div class="w-full max-w-md space-y-8">
        <div class="text-center">
            <h2 class="text-3xl font-semibold tracking-tight text-gray-900 dark:text-white">Register</h2>
            <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Create your account</p>
        </div>

        <form method="POST" action="" class="space-y-5" novalidate>
            {% csrf_token %}
            {% for field in form %}
                <div>
                    {% for error in field.errors %}
                        <div class="text-red-600 dark:text-red-400 text-sm mb-1">* {{ error }}</div>
                    {% endfor %}

                    {{ field }}

                    {% if field.help_text %}
                        <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">{{ field.help_text|safe }}</p>
                    {% endif %}
                </div>
            {% endfor %}

            <button type="submit" class="inline-flex w-full items-center justify-center rounded-md bg-blue-600 px-4 py-2 text-white font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">Register</button>
            <p class="text-center text-sm text-gray-600 dark:text-gray-400">Already have an account? <a href="{% url 'login' %}" class="font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500">Login</a></p>
        </form>
    </div>
</div>

<script>
  const getTheme = () => localStorage.getItem("theme") || (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");
  const updateIcons = () => {
    const isDark = document.documentElement.classList.contains('dark');
    document.getElementById('theme-toggle-dark-icon').classList.toggle('hidden', isDark);
    document.getElementById('theme-toggle-light-icon').classList.toggle('hidden', !isDark);
  };
  const setTheme = theme => {
    if(theme==='dark') document.documentElement.classList.add('dark'); 
    else document.documentElement.classList.remove('dark');
    localStorage.setItem('theme', theme);
    updateIcons();
  };
  setTheme(getTheme());
  updateIcons();
  document.getElementById('theme-toggle').addEventListener('click', ()=>{ 
    setTheme(document.documentElement.classList.contains('dark') ? 'light' : 'dark'); 
  });
</script>
{% endblock %}